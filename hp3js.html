<!DOCTYPE html>
<html lang="en">
    <head>
        <title>HEALPix</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                color: #808080;
                font-family:Monospace;
                font-size:13px;
                text-align:center;
                background-color: #ffffff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                position: absolute;
                top: 0px; width: 100%;
                padding: 5px;
            }
            a {
                color: #0080ff;
            }
            #ctrls{
                z-index:5;
                position: absolute;
                top: 10px; width: 200px;
                background-color: #aaaaaa;
                padding: 5px;
            }
        </style>
    </head>
    <body>
<div id="container">
<div id="ctrls">
<input type="button" value="Resolution 0" onclick="showMyLayer(1);" />
<input type="button" value="Resolution 1" onclick="showMyLayer(2);" />
<input type="button" value="Resolution 2" onclick="showMyLayer(3);" />
<input type="button" value="Resolution 3" onclick="showMyLayer(4);" />
<input type="button" value="Resolution 4" onclick="showMyLayer(5);" />
<input type="button" value="Resolution 5" onclick="showMyLayer(6);" />
<input type="button" value="Resolution 6" onclick="showMyLayer(7);" />
<input type="button" value="Resolution 7" onclick="showMyLayer(8);" />
</div>
</div>

        <script src="js/three.js"></script>

        <script src="js/Projector.js"></script>
<script src="js/OrbitControls.js"></script>

        <script>
            var container;
            var camera, scene, renderer;
            var group;
            var controls;
            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var RE = 200;
            var P1 = 100;
            var P2 = 100;
            var TORAD = Math.PI/180;
            var NINETYDEG = 90.0*TORAD;

            var l1mesh = null;
            var l2mesh = null;
            var l3mesh = null;
            var l4mesh = null;
            var l5mesh = null;
            var l6mesh = null;
            var l7mesh = null;
            var l8mesh = null;

            init();

            function init() {
                container = document.getElementById( 'container' );
                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 500;
                scene = new THREE.Scene();
                scene.background = new THREE.Color( 0x050505 );
                group = new THREE.Group();

                var loader = new THREE.TextureLoader();
                loader.load( 'images/hpc00lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1, P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l1mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc01lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l2mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc02lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l3mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc03lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l4mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc04lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l5mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc05lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l6mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc06lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l7mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hpc07lines_hr.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, P1,P2 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    l8mesh = mesh;
                    group.add( mesh );
                    addShapes();
                } );

                renderer = new THREE.WebGLRenderer();
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );

		// controls
		controls = new THREE.OrbitControls( camera, renderer.domElement );
		//controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)
		controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled
		controls.dampingFactor = 0.5;
		controls.screenSpacePanning = false;
		//controls.minDistance = 100;
		//controls.maxDistance = 500
		//controls.maxPolarAngle = Math.PI / 2;

                container.appendChild( renderer.domElement );
                window.addEventListener( 'resize', onWindowResize, false );
            }

            function showMyLayer(lnum)
            {
                var l1o = 0;
                var l2o = 0;
                var l3o = 0;
                var l4o = 0;
                var l5o = 0;
                var l6o = 0;
                var l7o = 0;
                var l8o = 0;

                var v1 = false;
                var v2 = false;
                var v3 = false;
                var v4 = false;
                var v5 = false;
                var v6 = false;
                var v7 = false;
                var v8 = false;

                var title = "HEALPix Resolution ";
                if(lnum == 1)
                {
                    l1o = 1;
                    title += lnum-1;
                    v1 = true;
                }
                else if(lnum == 2)
                {
                    l2o = 1;
                    title += lnum-1;
                    v2 = true;
                }
                else if(lnum == 3)
                {
                    l3o = 1;
                    title += lnum-1;
                    v3 = true;
                }
                else if(lnum == 4)
                {
                    l4o = 1;
                    title += lnum-1;
                    v4 = true;
                }
                else if(lnum == 5)
                {
                    l5o = 1;
                    title += lnum-1;
                    v5 = true;
                }
                else if(lnum == 6)
                {
                    l6o = 1;
                    title += lnum-1;
                    v6 = true;
                }
                else if(lnum == 7)
                {
                    l7o = 1;
                    title += lnum-1;
                    v7 = true;
                }
                else if(lnum == 8)
                {
                    l8o = 1;
                    title += lnum-1;
                    v8 = true;
                }
                //l1mesh.material.opacity=l1o;
                //l2mesh.material.opacity=l2o;
                //l3mesh.material.opacity=l3o;
                //l4mesh.material.opacity=l4o;
                //l5mesh.material.opacity=l5o;
                //l6mesh.material.opacity=l6o;
                //l7mesh.material.opacity=l7o;
                //l8mesh.material.opacity=l8o;
                l1mesh.visible = v1;
                l2mesh.visible = v2;
                l3mesh.visible = v3;
                l4mesh.visible = v4;
                l5mesh.visible = v5;
                l6mesh.visible = v6;
                l7mesh.visible = v7;
                l8mesh.visible = v8;
                document.title = title;
                render();
            }

	    function onWindowResize() {
				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}
            function animate() {
                requestAnimationFrame( animate );
                controls.update();
                render();
            }
            function render() {
                renderer.render( scene, camera );
            }

            function addShapes()
            {
                scene.add( group );
                showMyLayer(1);
            }
            animate();

        </script>

    </body>
</html>
