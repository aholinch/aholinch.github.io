<!DOCTYPE html>
<html lang="en">
    <head>
        <title>HEALPix Astronomy</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                color: #808080;
                font-family:Monospace;
                font-size:13px;
                text-align:center;
                background-color: #ffffff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                position: absolute;
                top: 0px; width: 100%;
                padding: 5px;
            }
            a {
                color: #0080ff;
            }
            #ctrls{
                z-index:5;
                position: absolute;
                top: 10px; width: 200px;
                background-color: #aaaaaa;
                padding: 5px;
            }
        </style>
    </head>
    <body>
<div id="container">
<div id="ctrls">
<input type="button" value="GAIA - Stars RA/Dec" onclick="showMyLayer(1);" />
<input type="button" value="GAIA - Stars Gal" onclick="showMyLayer(2);" />
<input type="button" value="GAIA - Stars Gal Flux" onclick="showMyLayer(3);" />
<input type="button" value="APOD - Milky Way Mosaic" onclick="showMyLayer(4);" />
<input type="button" value="2MASS - Galaxies" onclick="showMyLayer(5);" />
</div>
</div>

        <script src="js/three.js"></script>

        <script src="js/Projector.js"></script>
<script src="js/OrbitControls.js"></script>

        <script>
            var container;
            var camera, scene, renderer;
            var group;
            var controls;
            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var RE = 200;
            var TORAD = Math.PI/180;
            var XAXIS = new THREE.Vector3(1,0,0);
            var YAXIS = new THREE.Vector3(0,1,0);
            var NINETYDEG = 90.0*TORAD;

            var l1mesh = null;
            var l2mesh = null;
            var l3mesh = null;
            var l4mesh = null;
            var l5mesh = null;

            init();
            animate();

            function init() {
                container = document.getElementById( 'container' );
                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 0.1;
                scene = new THREE.Scene();
                scene.background = new THREE.Color( 0x050505 );
                group = new THREE.Group();
                scene.add( group );
                // earth
                var loader = new THREE.TextureLoader();
                loader.load( 'images/hp_stars09.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, 200, 200 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5, transparent: true, opacity:1 } );
                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.material.side=THREE.BackSide;
                    l1mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hp_starsgal09.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, 200, 200 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 , transparent: true, opacity:0.3} );
                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.material.side=THREE.BackSide;
                    l2mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hp_starsgalflux09.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, 200, 200 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 , transparent: true, opacity:0.3} );
                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.material.side=THREE.BackSide;
                    l3mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/3000_CC_BY-NC.jpg', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, 200, 200 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 , transparent: true, opacity:0.3} );
                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.material.side=THREE.BackSide;
                    l4mesh = mesh;
                    group.add( mesh );
                } );

                loader.load( 'images/hp_gals09.png', function ( texture ) {
                    var geometry = new THREE.SphereBufferGeometry( RE, 200, 200 );
                    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 , transparent: true, opacity:0.3} );
                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.material.side=THREE.BackSide;
                    l5mesh = mesh;
                    group.add( mesh );
                } );

                renderer = new THREE.WebGLRenderer();
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );

	// controls
				controls = new THREE.OrbitControls( camera, renderer.domElement );
				//controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)
				controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled
				controls.dampingFactor = 0.5;
				controls.screenSpacePanning = false;
				//controls.minDistance = 100;
				//controls.maxDistance = 500
				//controls.maxPolarAngle = Math.PI / 2;





                container.appendChild( renderer.domElement );
                window.addEventListener( 'resize', onWindowResize, false );
            }

            function showMyLayer(lnum)
            {
                var l1o = 0;
                var l2o = 0;
                var l3o = 0;
                var l4o = 0;
                var l5o = 0;
                var title = "";
                if(lnum == 1)
                {
                    l1o = 1;
                    title = "GAIA - 7 Million Stars RA/Dec";
                }
                else if(lnum == 2)
                {
                    l2o = 1;
                    title = "GAIA - 7 Million Stars Galactic Coordinates";
                }
                else if(lnum == 3)
                {
                    l3o = 1;
                    title = "GAIA - Flux From 7 Million Stars Galactic Coordinates";
                }
                else if(lnum == 4)
                {
                    l4o = 1;
                    title = "APOD - Milky Way Mosaic by Nick Risinger";
                }
                else if(lnum == 5)
                {
                    l5o = 1;
                    title = "2MASS Large Scale Structure";
                }
                l1mesh.material.opacity=l1o;
                l2mesh.material.opacity=l2o;
                l3mesh.material.opacity=l3o;
                l4mesh.material.opacity=l4o;
                l5mesh.material.opacity=l5o;
                document.title = title;
                render();
            }

	    function onWindowResize() {
				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}
            function animate() {
                requestAnimationFrame( animate );
                controls.update();
                render();
            }
            function render() {
                renderer.render( scene, camera );
            }


        </script>

    </body>
</html>
